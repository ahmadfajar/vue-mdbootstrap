@use 'sass:color';
@use '../mixins/css3/text-decorators' as decorators;
@use '../utils/color_helper' as helper;
@use '../color_vars' as colors;
@use '../variables' as vars;

@layer base, components, animations, utilities;

@layer base {
  // Global css variables
  //----------------------
  :root {
    // prettier-ignore
    --font-sans-serif: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", "Noto Sans", "Liberation Sans", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
    // prettier-ignore
    --font-monospace: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    --font-size-default: 1rem;
    --font-weight-light: 300;
    --font-weight-normal: 400;
    --font-weight-medium: 500;
    --font-weight-semibold: 600;
    --font-weight-bold: 700;
    --line-height: 1.5;
  }

  @media (prefers-reduced-motion: no-preference) {
    :root {
      scroll-behavior: smooth;
    }
  }

  *,
  ::before,
  ::after {
    box-sizing: border-box;
  }

  html,
  body {
    text-rendering: optimizelegibility;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    font-family: var(--font-sans-serif);
    font-size: var(--font-size-default);
    font-weight: var(--font-weight-normal);
    line-height: var(--line-height);
  }

  // Create default colors for background and text
  //-----------------------------------------------
  @each $name, $color in colors.$context-colors {
    @include decorators.decorate-color(
      $name,
      $color,
      $text-bg: true,
      $hyperlink: true
    );
  }
}

// Global component css variables
//--------------------------------
@layer components {
  :root {
    // Global css variables to maintain UI component aspects
    //-------------------------------------------------------
    --#{vars.$prefix}field-primary-indicator: oklch(0.458 0.23 304.441);
    --#{vars.$prefix}field-accent-indicator: oklch(0.743 0.102 303.276);
    --#{vars.$prefix}field-active-indicator: oklch(0.458 0.23 304.441);
    --#{vars.$prefix}field-button-active-bg: oklch(0.154 0 89.876 / 0.25);
    --#{vars.$prefix}field-button-hover-bg: oklch(0.431 0 89.876 / 0.2);
    --#{vars.$prefix}field-button-color: currentColor;
    --#{vars.$prefix}field-disabled-opacity: 0.4;
    --#{vars.$prefix}field-readonly-opacity: 0.55;

    --#{vars.$prefix}caret-size: 5px;
    --#{vars.$prefix}radius: #{vars.$radius-md};
    --#{vars.$prefix}radius-pill: #{vars.$radius-pill};

    // Global css variables to maintain apps UI colors
    //-------------------------------------------------
    --background: #{colors.$white};
    --foreground: #{colors.$neutral-darken-4};
    --background-secondary: #{colors.$white};
    --foreground-secondary: #{colors.#{colors.$gray-800}};
    --border-translucent: oklch(0.88 0.001 17.18);

    --appbar-background: var(--background);
    --appbar-foreground: var(--foreground);

    --sidedrawer-background: var(--background);
    --sidedrawer-foreground: var(--foreground);
    --sidedrawer-foreground-secondary: var(--foreground-secondary);
    --sidedrawer-menu-active-background: var(--background);
    --sidedrawer-menu-active-foreground: var(--foreground);
    --sidedrawer-menu-active-foreground-secondary: var(--foreground-secondary);
    --sidedrawer-menu-hover-background: var(--background);
    --sidedrawer-menu-hover-foreground: var(--foreground);

    // Used in dropdown menus, listview and other similar UI
    --navigation-menu-background: var(--background);
    --navigation-menu-foreground: var(--foreground);
    --navigation-menu-foreground-secondary: var(--foreground-secondary);
    --navigation-menu-active-background: #{vars.$default-active-bgcolor};
    // prettier-ignore
    --navigation-menu-active-foreground: #{helper.to-oklch(color.scale(vars.$default-active-bgcolor, $lightness: -10%))};
    --navigation-menu-active-foreground-secondary: var(--foreground-secondary);
    --navigation-menu-hover-background: #{vars.$default-hover-bgcolor};
    --navigation-menu-hover-foreground: var(--foreground);
    --navigation-menu-hover-foreground-secondary: var(--foreground-secondary);
  }
}

@use 'sass:color';
@use '../utils/color_helper' as helper;
@use '../color_vars' as colors;
@use '../variables' as vars;

// BsAlert variants mixins -- sass variables
//-------------------------------------------
@mixin make-default-variant($name, $color) {
  .#{vars.$prefix}alert-#{$name} {
    $background-color: helper.shift-color($color, vars.$alert-bg-scale);
    $border-color: helper.shift-color($color, vars.$alert-border-scale);
    $text-color: helper.shift-color($color, vars.$alert-color-scale);

    --#{vars.$prefix}alert-bg: #{$background-color};
    --#{vars.$prefix}alert-border-color: #{$border-color};
    --#{vars.$prefix}alert-color: #{$text-color};

    $hr-border-color: helper.to-oklch(color.adjust($border-color, $lightness: -10%));
    --#{vars.$prefix}alert-hr-color: #{$hr-border-color};

    $link-color: helper.to-oklch(color.mix(colors.$black, $text-color, 20%, oklch));
    --#{vars.$prefix}alert-link-color: #{$link-color};
  }
}

@mixin make-outline-variant($name, $color) {
  .#{vars.$prefix}alert-outline-#{$name} {
    $border-color: helper.to-oklch(color.adjust($color, $lightness: 15%));
    $hr-border-color: helper.to-oklch(color.adjust($color, $lightness: -5%));
    $link-color: helper.to-oklch(color.adjust($color, $lightness: -10%));
    $text-color: helper.to-oklch(color.adjust($color, $lightness: -5%));

    --#{vars.$prefix}alert-color: #{$text-color};
    --#{vars.$prefix}alert-border-color: #{$border-color};
    --#{vars.$prefix}alert-hr-color: #{$hr-border-color};
    --#{vars.$prefix}alert-link-color: #{$link-color};
  }
}

@mixin make-solid-variant($name, $color) {
  .#{vars.$prefix}alert-solid-#{$name} {
    $text-color: helper.set-color-contrast($color, colors.$gray-900, colors.$white);
    $hr-border-color: helper.set-color-contrast(
      $color,
      color.adjust($color, $lightness: -25%),
      color.change(color.adjust(colors.$white, $lightness: -4%), $alpha: 0.65)
    );

    --#{vars.$prefix}alert-bg: #{$color};
    --#{vars.$prefix}alert-color: #{$text-color};
    --#{vars.$prefix}alert-link-color: #{$text-color};
    --#{vars.$prefix}alert-hr-color: #{helper.to-oklch($hr-border-color)};
  }
}
